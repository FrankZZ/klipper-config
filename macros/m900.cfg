[gcode_macro M900]
description:
  "Convert Marlin linear advance (M900) commands to Klipper
  (SET_PRESSURE_ADVANCE) commands. For use with Marlin's linear advance
  calibration: https://marlinfw.org/tools/lin_advance/k-factor.html"
gcode:
	# Parameters
	{% set k_val = params.K|float %}
	SET_PRESSURE_ADVANCE ADVANCE={k_val}
